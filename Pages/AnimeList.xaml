<Page
    x:Class="AnimeApp.Pages.AnimeList"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:AnimeApp.Pages"
    xmlns:anilist="using:AnimeApp.Classes.Anilist.Result"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="Transparent"
    
    RequestedTheme="Default">

    <RelativePanel Margin="0, 0, 0, 0">
        <Rectangle RelativePanel.AlignTopWithPanel="True"
                   RelativePanel.AlignLeftWithPanel="True"
                   RelativePanel.AlignRightWithPanel="True"
                   RelativePanel.AlignBottomWithPanel="True">
            <Rectangle.Fill>
                <AcrylicBrush TintColor="{ThemeResource SystemAltHighColor}"
                              TintOpacity="0.75"/>
            </Rectangle.Fill>
        </Rectangle>
        
        <StackPanel x:Name="TabsMenu"
                    Orientation="Horizontal"
                    RelativePanel.AlignLeftWithPanel="True"
                    RelativePanel.AlignRightWithPanel="True"
                    RelativePanel.AlignTopWithPanel="True"
                    Height="36"
                    Margin="0, 40, 0, 2"
                    BorderThickness="0, 0, 0, 2"
                    BorderBrush="Gray">
            <Button x:Name="WatchingTab"
                    Content="Watching"
                    Background="Transparent"/>
            <Button x:Name="CompletedTab"
                    Content="Completed"
                    Background="Transparent"/>
            <Button x:Name="PausedTab"
                    Content="Paused"
                    Background="Transparent"/>
            <Button x:Name="DroppedTab"
                    Content="Dropped"
                    Background="Transparent"/>
            <Button x:Name="PlanningTab"
                    Content="Planning"
                    Background="Transparent"/>
        </StackPanel>

        <Grid x:Name="ColumnsDetails"
              RelativePanel.AlignLeftWithPanel="True"
              RelativePanel.AlignRightWithPanel="True"
              RelativePanel.Below="TabsMenu"
              Height="24">

            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="60"/>
                <ColumnDefinition Width="100"/>
                <ColumnDefinition Width="120"/>
            </Grid.ColumnDefinitions>

            <TextBlock Text="Cover"
                       Grid.Column="0"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Title"
                       Grid.Column="1"
                       HorizontalAlignment="Left"
                       Margin="4, 0, 0, 0"/>
            <TextBlock Text="Progress"
                       Grid.Column="2"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Score"
                       Grid.Column="3"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Type"
                       Grid.Column="4"
                       HorizontalAlignment="Center"/>
            <TextBlock Text="Season"
                       Grid.Column="5"
                       HorizontalAlignment="Center"/>
        </Grid>

        <ListView RelativePanel.AlignLeftWithPanel="True"
                  RelativePanel.AlignRightWithPanel="True"
                  RelativePanel.AlignBottomWithPanel="True"
                  RelativePanel.Below="ColumnsDetails"
                  
                  ItemsSource="{x:Bind medias, Mode=OneWay}"
                  HorizontalContentAlignment="Stretch">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="anilist:Entry">
                    <Grid Height="100"
                          Margin="0, 0, -12, 0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="100"/>
                            <ColumnDefinition Width="120"/>
                        </Grid.ColumnDefinitions>

                        <Image x:Name="MediaImage"
                               Source="{x:Bind media.coverImage.medium}"
                               Width="100"
                               Height="100"
                               Grid.Column="0"/>

                        <TextBlock x:Name="MediaTitle"
                                   Text="{x:Bind media.title.romaji}"
                                   TextWrapping="WrapWholeWords"
                                   
                                   Grid.Column="1"
                                   VerticalAlignment="Center"/>

                        <ProgressBar x:Name="EntryProgress"
                                     Value="{x:Bind progress}"
                                     Maximum="{x:Bind media.episodes.Value}"
                                     
                                     Grid.Column="2"/>

                        <TextBlock x:Name="EntryScore"
                                   Text="{x:Bind score}"
                                   
                                   Grid.Column="3"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>

                        <TextBlock x:Name="MediaType"
                                   Text="{x:Bind media.format}"
                                   
                                   Grid.Column="4"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>

                        <TextBlock x:Name="MediaSeason"
                                   Text="{x:Bind media.season}"
                                   
                                   Grid.Column="5"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Center"/>
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                </Style>
            </ListView.ItemContainerStyle>
        </ListView>
    </RelativePanel>
</Page>
